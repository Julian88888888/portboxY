# Custom Links API Test Instructions

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏

–¢–µ—Å—Ç `test-custom-links-api-auto.js` –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å API –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏—Ç —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK).

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞:

```bash
# –ë–µ–∑ —Ç–æ–∫–µ–Ω–∞ (–±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –Ω–æ –ø–æ–ª—É—á–∏—Ç 401)
node test-custom-links-api-auto.js

# –° —Ç–æ–∫–µ–Ω–æ–º (–ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç)
TEST_TOKEN=your_token_here node test-custom-links-api-auto.js
```

### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –¥–ª—è —Ç–µ—Å—Ç–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```javascript
   // –í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑ localStorage
   localStorage.getItem('sb-<your-project-ref>-auth-token')
   
   // –í–∞—Ä–∏–∞–Ω—Ç 2: –ò–∑ Supabase session
   const { data } = await supabase.auth.getSession();
   console.log(data.session.access_token);
   ```

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ—Å—Ç:

- ‚úÖ POST /api/custom-links - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Å—ã–ª–∫–∏
- ‚úÖ –ü–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö 500 (RLS)
- ‚úÖ –ü–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö 429 (Rate Limit)
- ‚úÖ –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ (200) –∏–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –ø–æ–ø—ã—Ç–æ–∫

### –û—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è:

#### –û—à–∏–±–∫–∞ 42501 (RLS Policy Violation):
```
üí° –†–µ—à–µ–Ω–∏–µ:
1. –ó–∞–π–¥–∏—Ç–µ –≤ Vercel Dashboard ‚Üí Project ‚Üí Settings ‚Üí Environment Variables
2. –î–æ–±–∞–≤—å—Ç–µ: SUPABASE_SERVICE_ROLE_KEY = <–≤–∞—à-service-role-key>
3. –ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á –∏–∑ Supabase Dashboard ‚Üí Settings ‚Üí API
4. –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
```

#### –û—à–∏–±–∫–∞ 401 (Unauthorized):
```
üí° –†–µ—à–µ–Ω–∏–µ:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ TEST_TOKEN –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–∞
- –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç–µ–∫
```

#### –û—à–∏–±–∫–∞ 429 (Rate Limited):
```
üí° –†–µ—à–µ–Ω–∏–µ:
- –¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å –ø–æ–ø—ã—Ç–∫–∏
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ 15 –º–∏–Ω—É—Ç –¥–ª—è —Å–±—Ä–æ—Å–∞ –ª–∏–º–∏—Ç–∞
```

### –¢–µ—Å—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ:

- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (200 OK)
- ‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ø—ã—Ç–æ–∫ (100)
- ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Ä—É—á–Ω—É—é (Ctrl+C)

### –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

```bash
TEST_TOKEN=eyJhbGc... node test-custom-links-api-auto.js
```

–¢–µ—Å—Ç –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:
- –°—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–æ–∫ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –ü—Ä–æ–≥—Ä–µ—Å—Å –∫–∞–∂–¥—ã–µ 5 –ø–æ–ø—ã—Ç–æ–∫
- –§–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
